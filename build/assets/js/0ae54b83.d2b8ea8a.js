"use strict";(self.webpackChunkinterview=self.webpackChunkinterview||[]).push([[584],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>h});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var o=n.createContext({}),u=function(t){var e=n.useContext(o),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=u(t.components);return n.createElement(o.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},p=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,o=t.parentName,d=s(t,["components","mdxType","originalType","parentName"]),p=u(a),h=r,c=p["".concat(o,".").concat(h)]||p[h]||m[h]||l;return a?n.createElement(c,i(i({ref:e},d),{},{components:a})):n.createElement(c,i({ref:e},d))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=p;var s={};for(var o in e)hasOwnProperty.call(e,o)&&(s[o]=e[o]);s.originalType=t,s.mdxType="string"==typeof t?t:r,i[1]=s;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},1565:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>o,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>u});var n=a(7462),r=(a(7294),a(3905));const l={tree_title:"Pastebin System Design",description:"System Design text sharing web-applications like Pastebin.",last_modified:new Date("2022-06-15T13:20:35.203Z")},i="Pastebin System Design",s={unversionedId:"system-design/pastebin",id:"system-design/pastebin",title:"Pastebin System Design",description:"System Design text sharing web-applications like Pastebin.",source:"@site/docs/system-design/pastebin.md",sourceDirName:"system-design",slug:"/system-design/pastebin",permalink:"/interview/docs/system-design/pastebin",draft:!1,tags:[],version:"current",frontMatter:{tree_title:"Pastebin System Design",description:"System Design text sharing web-applications like Pastebin.",last_modified:"2022-06-15T13:20:35.203Z"},sidebar:"docs",previous:{title:"Netflix System Design",permalink:"/interview/docs/system-design/netflix"},next:{title:"Tinyurl System Design",permalink:"/interview/docs/system-design/tinyurl"}},o={},u=[{value:"Functional Requirements of the System.",id:"functional-requirements-of-the-system",level:2},{value:"Non-Functional Requirements of the System.",id:"non-functional-requirements-of-the-system",level:2},{value:"Capacity Estimation",id:"capacity-estimation",level:2},{value:"Assumptions",id:"assumptions",level:3},{value:"Traffic",id:"traffic",level:3},{value:"Data Estimation",id:"data-estimation",level:3},{value:"\u2753How much data you will need to for your system to run smoothly over a period of time?",id:"how-much-data-you-will-need-to-for-your-system-to-run-smoothly-over-a-period-of-time",level:4},{value:"\u2753Which database will you be using for the system. (Between NoSQL and SQL).",id:"which-database-will-you-be-using-for-the-system-between-nosql-and-sql",level:4},{value:"\u2753What is the strategy for storing the text for the system?",id:"what-is-the-strategy-for-storing-the-text-for-the-system",level:4},{value:"\u2753What is the strategy for caching of the requests?",id:"what-is-the-strategy-for-caching-of-the-requests",level:4},{value:"\u2753What is Blob?",id:"what-is-blob",level:4},{value:"Database Schema",id:"database-schema",level:3},{value:"Paste Table",id:"paste-table",level:4},{value:"User Table",id:"user-table",level:4},{value:"References",id:"references",level:2}],d={toc:u};function m(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"pastebin-system-design"},"Pastebin System Design"),(0,r.kt)("h2",{id:"functional-requirements-of-the-system"},"Functional Requirements of the System."),(0,r.kt)("p",null,"\u27a1\ufe0f ",(0,r.kt)("strong",null,"Durability")," : The system should be highly reliable. Texts created by users should never be lost.",(0,r.kt)("br",null),"\n\u27a1\ufe0f ",(0,r.kt)("strong",null,"High Availability")," : ",(0,r.kt)("i",null,"The system needs to be highly available. Meaning that it needs to be able to handle a large number of requests at the same time."),(0,r.kt)("br",null),"\n\u27a1\ufe0f ",(0,r.kt)("strong",null,"Low Latency")," : ",(0,r.kt)("i",null,"User should be able post text and get it back in a timely manner."),(0,r.kt)("br",null)),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"non-functional-requirements-of-the-system"},"Non-Functional Requirements of the System."),(0,r.kt)("p",null,"\u27a1\ufe0f Paste size should not exceed some memory say 10MB.",(0,r.kt)("br",null),"\n\u27a1\ufe0f Custom Path URL",(0,r.kt)("br",null),"\n\u27a1\ufe0f Paste Expiry : Lets say 6 months.",(0,r.kt)("br",null),"\n\u27a1\ufe0f User Login / Anonymous",(0,r.kt)("br",null)),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"capacity-estimation"},"Capacity Estimation"),(0,r.kt)("h3",{id:"assumptions"},"Assumptions"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Estimation"),(0,r.kt)("th",{parentName:"tr",align:null},"Pastes"),(0,r.kt)("th",{parentName:"tr",align:null},"Reads"),(0,r.kt)("th",{parentName:"tr",align:null},"Paste Size"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Per Day"),(0,r.kt)("td",{parentName:"tr",align:null},"1M"),(0,r.kt)("td",{parentName:"tr",align:null},"10 ","*"," 1M"),(0,r.kt)("td",{parentName:"tr",align:null},"Max 10MB")))),(0,r.kt)("p",null,"As per the above table we can say that the system can handle 100K pastes per day and can handle 10MB per paste.\nAnd also to notice that the system is Ready heavy, as user might access paste url more than the user actually posts."),(0,r.kt)("h3",{id:"traffic"},"Traffic"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Writes : 1M"),(0,r.kt)("th",{parentName:"tr",align:null},"Reads : 10 ","*"," 1M"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1M Per Day would be ~12 Requests per second."),(0,r.kt)("td",{parentName:"tr",align:null},"10 ","*"," 1M pastes would be ~120 Requests per second.")))),(0,r.kt)("p",null,"\u27a1\ufe0f Along with this you should always keep a buffer of 30%. Meaning that the system should be able to handle either 30% less or 30% more requests than the actual traffic."),(0,r.kt)("h3",{id:"data-estimation"},"Data Estimation"),(0,r.kt)("h4",{id:"how-much-data-you-will-need-to-for-your-system-to-run-smoothly-over-a-period-of-time"},"\u2753How much data you will need to for your system to run smoothly over a period of time?"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Estimation"),(0,r.kt)("th",{parentName:"tr",align:null},"Pastes"),(0,r.kt)("th",{parentName:"tr",align:null},"Paste Size Max"),(0,r.kt)("th",{parentName:"tr",align:null},"Paste Size Average"),(0,r.kt)("th",{parentName:"tr",align:null},"Total Data Required - Average"),(0,r.kt)("th",{parentName:"tr",align:null},"Total Data Required - Max"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Per Day"),(0,r.kt)("td",{parentName:"tr",align:null},"1M"),(0,r.kt)("td",{parentName:"tr",align:null},"10MB"),(0,r.kt)("td",{parentName:"tr",align:null},"100KB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 100KB = ~100 GB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 10MB = ~ 1TB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Per Month"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 30"),(0,r.kt)("td",{parentName:"tr",align:null},"10MB"),(0,r.kt)("td",{parentName:"tr",align:null},"100KB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 100KB = ~3TB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 10MB ","*"," 30 = ~ 30TB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Per Year"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 365"),(0,r.kt)("td",{parentName:"tr",align:null},"10MB"),(0,r.kt)("td",{parentName:"tr",align:null},"100KB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 100KB = ~36.5TB"),(0,r.kt)("td",{parentName:"tr",align:null},"1M ","*"," 10MB = ~ 365TB")))),(0,r.kt)("h4",{id:"which-database-will-you-be-using-for-the-system-between-nosql-and-sql"},"\u2753Which database will you be using for the system. (Between NoSQL and SQL)."),(0,r.kt)("h4",{id:"what-is-the-strategy-for-storing-the-text-for-the-system"},"\u2753What is the strategy for storing the text for the system?"),(0,r.kt)("p",null,"\u27a1\ufe0f So currently we have is two types of consideration for the size of the text (average and max).",(0,r.kt)("br",null),"\n\u27a1\ufe0f So storing 100KB of text directly into the database is not a problem and its not even a burden on the database.",(0,r.kt)("br",null),"\n\u27a1\ufe0f But if we want to store a lot of text, then we need to store it in a way that it can be accessed easily. For that we can use is S3 bucket to store it as Blob and in our DB we can store the reference of the Blob.",(0,r.kt)("br",null),"\n\u27a1\ufe0f On top of it we can have a Hybrid approach that some memory data can be stored in the DB and the rest can be stored in S3. This way we will also be able to preview the file and the user wont feel the lag which the full file is loaded in the background."),(0,r.kt)("h4",{id:"what-is-the-strategy-for-caching-of-the-requests"},"\u2753What is the strategy for caching of the requests?"),(0,r.kt)("p",null,"\u27a1\ufe0f As discussed in the earlier point, Hybrid approach can be good for accessing data in a better way, eliminating the lag of the data.",(0,r.kt)("br",null),"\n\u27a1\ufe0f But we need to be careful with the caching strategy, as big chunk of data can be cached in the memory but the problem would be burden on the DB and in the cache memory we cannot put so much of data for any user.",(0,r.kt)("br",null)),(0,r.kt)("h4",{id:"what-is-blob"},"\u2753What is Blob?"),(0,r.kt)("p",null,"\u27a1\ufe0f BLOB stands for a ",(0,r.kt)("strong",null,"Binary Large Object"),", a data type that stores binary data. Binary Large Objects (BLOBs) can be complex files like text, images or videos, unlike other data strings that only store letters and numbers. A BLOB will hold multimedia objects to add to a database; however, not all databases support BLOB storage."),(0,r.kt)("h3",{id:"database-schema"},"Database Schema"),(0,r.kt)("h4",{id:"paste-table"},"Paste Table"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Column"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},"INT"),(0,r.kt)("td",{parentName:"tr",align:null},"Primary Key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content"),(0,r.kt)("td",{parentName:"tr",align:null},"TEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"Text Content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"size"),(0,r.kt)("td",{parentName:"tr",align:null},"INT"),(0,r.kt)("td",{parentName:"tr",align:null},"Size of the text")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"s3BucketURL"),(0,r.kt)("td",{parentName:"tr",align:null},"TEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"S3 Bucket URL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"created_at"),(0,r.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,r.kt)("td",{parentName:"tr",align:null},"Date and Time of creation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"expires_at"),(0,r.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,r.kt)("td",{parentName:"tr",align:null},"Date and Time of expiry of the Paste")))),(0,r.kt)("h4",{id:"user-table"},"User Table"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Column"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},"INT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"TEXT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"created_at"),(0,r.kt)("td",{parentName:"tr",align:null},"DATETIME")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)("a",{href:"https://www.youtube.com/watch?v=josjRSBqEBI"},"Paste bin system design | Software architecture for paste bin"))))}m.isMDXComponent=!0}}]);